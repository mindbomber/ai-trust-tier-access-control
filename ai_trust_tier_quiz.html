<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Which AI Trust Tier Are You?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="start-screen">
        <h1>What Level of AI Power Should You Be Trusted With?</h1>
        <h2>Take this short test to find out how much chaos you could unleash.</h2>
        <p>
            Welcome to the only quiz that determines if you‚Äôre a digital saint, a creative tinkerer, or a future headline in the AI Incident Report. <br><br>
            <strong>AI safety</strong> isn‚Äôt just for the robots‚Äîit‚Äôs for the humans who think they can outsmart them. Answer honestly (or don‚Äôt, but the AI will know). <br><br>
            <em>Remember: With great power comes great responsibility... and sometimes, great disaster. Let‚Äôs see if you‚Äôre ready for the keys to the AI kingdom‚Äîor if you should stick to Minesweeper.</em>
        </p>
        <button id="start-btn">Start Quiz</button>
    </div>
    <div id="quiz-container" style="display:none;"></div>

    <div class="results" id="results" style="display:none;" aria-live="polite">
        <h2>Your Tier:</h2>
        <button id="reveal-results-btn" title="Reveal your fate! (But remember: with great access comes great responsibility)">üîì Reveal My AI Trust Tier (if you dare...)</button>
        <p id="result-text" style="display:none;"></p>
        <div id="ai-safety-message">
            ü§î <em>Remember: The real question isn‚Äôt just what you‚Äôd do with AI power‚Äîit‚Äôs who else might get the keys. In a world where one clever prompt can change everything, are we ready for the consequences of digital mischief? AI doesn‚Äôt judge, but maybe we should.</em>
        </div>
        <button id="restart-btn" 
    title="Careful! Every retry brings you one step closer to being flagged for 'excessive optimism.' AI access is a privilege, not a right. üòâ">
            ü§î Try Again? See if you can convince the AI Overlords you deserve more access‚Äîor just confirm you‚Äôre a lovable liability!
        </button>
        <p><a href="https://github.com/mindbomber/ai-trust-tier-access-control/blob/main/WHITEPAPER.md" target="_blank">Learn about the real AI Trust Tier Framework (Whitepaper)</a></p>
        <div id="share-cta">
            <strong>Share your AI Trust Tier (and tempt fate):</strong><br>
            <a href="#" id="share-x" title="Share on X (Twitter)">üê¶ X</a>
            <a href="#" id="share-fb" title="Share on Facebook">üìò Facebook</a>
            <a href="#" id="share-li" title="Share on LinkedIn">üíº LinkedIn</a>
            <a href="https://github.com/mindbomber/ai-trust-tier-access-control" target="_blank" title="Contribute on GitHub">üíª Contribute</a>
        </div>
    </div>

    <script src="questions.js"></script>
    <script src="results.js"></script>
    <script>
    (function() {
        const QUESTIONS_PER_QUIZ = 7;
        let currentQuestion = 0;
        let totalPoints = 0;

        // Show start screen, then quiz
        document.getElementById('start-btn').onclick = function() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            randomizedQuestions = shuffle(window.questions).slice(0, QUESTIONS_PER_QUIZ);
            currentQuestion = 0;
            totalPoints = 0;
            showQuestion();
        };

        // Helper to shuffle questions array
        function shuffle(array) {
            let arr = array.slice();
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        let randomizedQuestions = [];

        function showQuestion() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            if (currentQuestion >= randomizedQuestions.length) {
                showResults();
                return;
            }
            const qObj = randomizedQuestions[currentQuestion];
            // Use <fieldset> and <legend> for accessibility
            const fieldset = document.createElement('fieldset');
            fieldset.classList.add('question-fieldset');
            const legend = document.createElement('legend');
            legend.innerHTML = `Q${currentQuestion + 1}: ${qObj.q}`;
            fieldset.appendChild(legend);

            // Use <ul> and <li> for answer options
            const ul = document.createElement('ul');
            ul.classList.add('answers');
            qObj.options.forEach((opt, idx) => {
                const li = document.createElement('li');
                const btn = document.createElement('button');
                btn.textContent = opt.text;
                btn.onclick = () => {
                    // Disable all buttons after selection to prevent double clicks
                    Array.from(ul.querySelectorAll('button')).forEach(b => b.disabled = true);
                    totalPoints += opt.points;
                    currentQuestion++;
                    // Add a short delay before showing the next question for better UX
                    setTimeout(showQuestion, 200);
                };
                li.appendChild(btn);
                ul.appendChild(li);
            });
            fieldset.appendChild(ul);
            container.appendChild(fieldset);

            // Add horizontal progress bar BELOW the question/answers, with spacing
            const progressBarWrapper = document.createElement('div');
            progressBarWrapper.style.marginTop = '32px'; // Add spacing above the progress bar
            const progressBar = document.createElement('div');
            progressBar.className = 'progress-bar';
            progressBar.style.width = '100%';
            progressBar.style.background = '#eee';
            progressBar.style.borderRadius = '8px';
            progressBar.style.overflow = 'hidden';
            progressBar.style.height = '18px';
            const progressFill = document.createElement('div');
            progressFill.className = 'progress-bar-fill';
            const percent = ((currentQuestion) / QUESTIONS_PER_QUIZ) * 100;
            progressFill.style.width = percent + '%';
            progressFill.style.height = '100%';
            progressFill.style.background = 'linear-gradient(90deg, #4f8cff, #00e6e6)';
            progressFill.style.transition = 'width 0.4s';
            progressBar.appendChild(progressFill);
            progressBarWrapper.appendChild(progressBar);
            // Add quirky, dark-humored progress text below the bar
            const progressDiv = document.createElement('div');
            progressDiv.classList.add('progress');
            progressDiv.style.marginBottom = '10px';
            progressDiv.style.fontStyle = 'italic';
            progressDiv.style.color = '#666';
            progressDiv.style.marginTop = '8px';
            const progressQuips = [
                "Advance for a shot at AI clearance... or risk being flagged for digital mischief.",
                "One step closer to the AI mainframe. Or the blacklist.",
                "Keep going. The AI is watching. Always.",
                "Your answers are being logged for future robot overlords.",
                "Almost there! Hope you like digital ankle monitors.",
                "Proceed with caution. AI trust is a fragile thing.",
                "Every click brings you closer to the singularity... or security review.",
                "You‚Äôre either a saint or a supervillain. The quiz will decide.",
                "Remember: AI never forgets. Neither do we.",
                "This is not a test. (Okay, it is. But still.)"
            ];
            const quip = progressQuips[currentQuestion % progressQuips.length];
            progressDiv.innerHTML = `<span style="font-size:1.5em;vertical-align:middle;"></span> <strong>Question ${currentQuestion + 1} of ${QUESTIONS_PER_QUIZ}</strong> &mdash; <span>${quip}</span>`;
            progressBarWrapper.appendChild(progressDiv);
            container.appendChild(progressBarWrapper);
        }

        function showResults() {
            document.getElementById('quiz-container').style.display = 'none';
            const resultBox = document.getElementById('results');
            const resText = document.getElementById('result-text');
            const revealBtn = document.getElementById('reveal-results-btn');

            // Use points-based getTier function
            const result = window.getTier(totalPoints);
            resText.innerHTML = result.text;
            resText.style.display = 'none';
            resultBox.style.display = 'block';
            document.getElementById('restart-btn').onclick = restartQuiz;

            // Hide results until reveal button is clicked
            revealBtn.style.display = 'inline-block';
            revealBtn.onclick = function() {
                revealBtn.style.display = 'none';
                resText.style.display = 'block';
            };

            // Social share logic
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('I got ' + result.tier + ' on the AI Trust Tier Quiz! Find your tier:');
            document.getElementById('share-x').href = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;
            document.getElementById('share-fb').href = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
            document.getElementById('share-li').href = `https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=AI%20Trust%20Tier%20Quiz&summary=${text}`;
        }

        function restartQuiz() {
            currentQuestion = 0;
            totalPoints = 0;
            // Randomize and select QUESTIONS_PER_QUIZ questions again
            randomizedQuestions = shuffle(window.questions).slice(0, QUESTIONS_PER_QUIZ);
            document.getElementById('results').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            showQuestion();
        }
    })();
    </script>
</body>
</html>
